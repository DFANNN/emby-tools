# emby-tools

## ğŸš€ ä¸€ä½“åŒ–éƒ¨ç½²ä¸å¼€å‘è¯´æ˜

### ä¸€ã€å‰åç«¯ä¸€ä½“åŒ– Docker éƒ¨ç½²ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰

1. æ„å»ºé•œåƒï¼š
   ```bash
   docker build -t dfannn/emby-tools-allinone .
   ```
2. è¿è¡Œå®¹å™¨ï¼š
   ```bash
   docker run -d -p 3001:3001 --name emby-tools dfannn/emby-tools-allinone
   ```
3. è®¿é—®æœåŠ¡ï¼š
   æ‰“å¼€æµè§ˆå™¨è®¿é—® http://<ä½ çš„ NAS åœ°å€>:3001

> Dockerfile ä¼šè‡ªåŠ¨å®Œæˆå‰ç«¯æ‰“åŒ…å¹¶å°†äº§ç‰©å¤åˆ¶åˆ°åç«¯ public ç›®å½•ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œã€‚

### äºŒã€æœ¬åœ°å¼€å‘æµç¨‹

1. å®‰è£…ä¾èµ–
   ```bash
   cd frontend && pnpm install
   cd ../backend && pnpm install
   ```
2. å‰ç«¯æ‰“åŒ…
   ```bash
   cd frontend
   pnpm build
   ```
3. å¤åˆ¶å‰ç«¯äº§ç‰©åˆ°åç«¯ï¼ˆè‡ªåŠ¨è„šæœ¬ï¼‰
   ```bash
   ./copy-frontend.sh
   ```
4. å¯åŠ¨åç«¯æœåŠ¡
   ```bash
   cd backend
   pnpm start
   ```
5. è®¿é—®æœåŠ¡
   æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:3001

### ä¸‰ã€æ³¨æ„äº‹é¡¹

- åç«¯é™æ€èµ„æºç›®å½•ä¸º `backend/src/public`ï¼Œå‰ç«¯ build äº§ç‰©ä¼šè‡ªåŠ¨å¤åˆ¶åˆ°æ­¤ç›®å½•ã€‚
- å¦‚éœ€ä¿®æ”¹ç«¯å£æˆ–å…¶ä»–é…ç½®ï¼Œè¯·æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´ Dockerfile å’Œåç«¯ä»£ç ã€‚
- åç«¯éœ€æœ‰å¦‚ä¸‹é™æ€èµ„æºæœåŠ¡ä»£ç ï¼ˆä»¥ Express ä¸ºä¾‹ï¼‰ï¼š
  ```js
  app.use(express.static(path.join(__dirname, 'public')))
  ```

---

### è‡ªåŠ¨åŒ–è„šæœ¬è¯´æ˜

- `copy-frontend.sh`ï¼šè‡ªåŠ¨å°†å‰ç«¯ build äº§ç‰©å¤åˆ¶åˆ°åç«¯ public ç›®å½•ï¼Œé€‚åˆæœ¬åœ°å¼€å‘ä½¿ç”¨ã€‚
- Docker éƒ¨ç½²æ—¶æ— éœ€æ‰‹åŠ¨å¤åˆ¶ï¼Œé•œåƒæ„å»ºè¿‡ç¨‹ä¼šè‡ªåŠ¨å®Œæˆã€‚
